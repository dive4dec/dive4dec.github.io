"use strict";(self.webpackChunk_deathbeds_ipydrawio=self.webpackChunk_deathbeds_ipydrawio||[]).push([[609],{599:(e,n,a)=>{a.d(n,{Z:()=>o});var t=a(609),i=a.n(t)()((function(e){return e[1]}));i.push([e.id,"/**\n  Copyright 2022 ipydrawio contributors\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n**/\n\n.jp-IPyDiagram .jp-Diagram {\n  position: absolute;\n}\n\n.jp-Diagram {\n  background-color: var(--jp-layout-color1);\n}\n\n.jp-Diagram .jp-IFrame {\n  opacity: 0;\n}\n\n.jp-Diagram.jp-Diagram-ready .jp-IFrame {\n  opacity: 1;\n  transition: opacity 0.2s;\n}\n\n.jp-Diagram .jp-Toolbar:empty {\n  height: 0 !important;\n  max-height: 0;\n  min-height: 0;\n  display: none;\n}\n\n.jp-DiagramMedia {\n  min-height: 300px;\n}\n\n.jp-IPyDiagram-CreateCustom {\n  overflow-y: auto;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n}\n\n.jp-IPyDiagram-CreateCustom.jp-RenderedHTMLCommon ul {\n  padding: 0;\n  margin: 0 1em;\n}\n\n.jp-IPyDiagram-CreateCustom header {\n  flex: 0;\n  background-color: var(--jp-layout-color0);\n  padding: var(--jp-notebook-padding);\n  display: flex;\n  border-bottom: solid 1px var(--jp-border-color0);\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.jp-IPyDiagram-CreateCustom header h1 {\n  flex: 0;\n  padding: 0;\n  margin: 0 !important;\n}\n\n.jp-RenderedHTMLCommon.jp-IPyDiagram-CreateCustom h1,\n.jp-RenderedHTMLCommon.jp-IPyDiagram-CreateCustom h2 {\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  padding: 0 0.5em;\n}\n\n.jp-IPyDiagram-CreateCustom header button {\n  display: flex;\n  align-items: center;\n  padding: 1.5em;\n  margin-left: 1em;\n}\n\n.jp-IPyDiagram-CreateCustom input {\n  flex: 1;\n  margin: 0 1em;\n}\n\n.jp-IPyDiagram-CreateCustom header button > * {\n  flex: 1;\n  white-space: nowrap;\n}\n\n.jp-IPyDiagram-CreateCustom header button > span:first-child {\n  line-height: 0;\n  margin-right: 0.5em;\n}\n\n.jp-IPyDiagram-CreateCustom form {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--jp-notebook-padding);\n}\n\n.jp-IPyDiagram-CreateCustom input[type='text'] {\n  font-size: var(--jp-ui-font-size1);\n  padding: 0.5em;\n}\n\n.jp-IPyDiagram-CreateCustom section {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 1em;\n}\n\n.jp-IPyDiagram-CreateCustom section > h2 {\n  flex: 0;\n}\n\n.jp-IPyDiagram-CreateCustom section > ul {\n  flex: 1;\n}\n\n.jp-IPyDiagram-cards {\n  list-style: none;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n}\n\n.jp-IPyDiagram-cards > li {\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  margin: 0 1em 1em 0;\n}\n\n.jp-IPyDiagram-cards > li input[type='radio'] {\n  display: none;\n}\n\n.jp-IPyDiagram-cards > li label {\n  position: relative;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: center;\n  border: solid 1px var(--jp-border-color0);\n  padding: 0.5em;\n  min-width: 10em;\n  min-height: 10em;\n  width: 10em;\n  height: 10em;\n  cursor: pointer;\n  background-color: var(--jp-layout-color1);\n  box-shadow: var(--jp-elevation-z2);\n}\n\n.jp-IPyDiagram-cards > li label:hover,\n.jp-IPyDiagram-cards > li label:active,\n.jp-IPyDiagram-cards > li label:focus {\n  box-shadow: var(--jp-elevation-z6);\n}\n\n.jp-IPyDiagram-cards > li input:checked ~ label {\n  font-weight: bold;\n  border-color: var(--jp-brand-color0);\n  box-shadow: var(--jp-elevation-z6);\n  background-color: var(--jp-layout-color2);\n}\n\n.jp-IPyDiagram-cards > li > label > * {\n  flex: 0;\n}\n\n.jp-IPyDiagram-cards > li > label img {\n  max-width: 100%;\n  flex: 1;\n  object-fit: contain;\n  background: #fff;\n}\n\n.jp-IPyDiagram-tags {\n  list-style: none;\n  display: flex;\n  position: absolute;\n  bottom: 0.25em;\n  right: 0.25em;\n  left: 0.25em;\n  justify-content: flex-end;\n  flex-wrap: wrap;\n  max-width: 100%;\n}\n\n.jp-IPyDiagram-tags li {\n  color: #fff;\n  list-style: none;\n  flex: 0;\n  background-color: var(--jp-icon-contrast-color0);\n  border-radius: 0.25em;\n  font-weight: normal;\n  padding: 0 0.25em;\n  margin: 0.25em 0 0 0.25em;\n}\n\n/* some overrides for retro-like applications */\n.jp-IPyDiagram-main #main-panel {\n  max-width: unset;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100% !important;\n  left: 0 !important;\n}\n\n.jp-IPyDiagram-big-dialog .jp-Dialog-content {\n  min-width: 95vw;\n  min-height: 95vh;\n  max-width: 95vw;\n  max-height: 95vh;\n}\n",""]);const o=i},689:(e,n,a)=>{a.d(n,{Z:()=>t});const t='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 161.6 161.6" version="1.1">\n  <g class="jp-icon-warn0 jp-icon-selectable" fill="#f08705">\n    <path d="m 161.6,154.7 c 0,3.9 -3.2,6.9 -6.9,6.9 H 6.9 C 3,161.6 0,158.4 0,154.7 V 6.9 C 0,3 3.2,0 6.9,0 h 147.8 c 3.9,0 6.9,3.2 6.9,6.9 z" />\n  </g>\n  <g class="jp-icon-selectable" fill="rgba(0,0,0,0.1)">\n    <path d="m 161.6,154.7 c 0,3.9 -3.2,6.9 -6.9,6.9 H 55.3 l -32.2,-32.7 20,-32.7 59.4,-73.8 58.9,60.7 z"/>\n  </g>\n  <g class="jp-icon-accent0 jp-icon-selectable-inverse" fill="#ffffff">\n    <path d="m 132.7,90.3 h -17 l -18,-30.6 c 4,-0.8 7,-4.4 7,-8.6 V 28 c 0,-4.9 -3.9,-8.8 -8.8,-8.8 h -30 c -4.9,0 -8.8,3.9 -8.8,8.8 v 23.1 c 0,4.3 3,7.8 6.9,8.6 L 46,90.4 H 29 c -4.9,0 -8.8,3.9 -8.8,8.8 v 23.1 c 0,4.9 3.9,8.8 8.8,8.8 h 30 c 4.9,0 8.8,-3.9 8.8,-8.8 V 99.2 c 0,-4.9 -3.9,-8.8 -8.8,-8.8 H 56.1 L 73.9,60 h 13.9 l 17.9,30.4 h -3 c -4.9,0 -8.8,3.9 -8.8,8.8 v 23.1 c 0,4.9 3.9,8.8 8.8,8.8 h 30 c 4.9,0 8.8,-3.9 8.8,-8.8 V 99.2 c 0,-4.9 -3.9,-8.9 -8.8,-8.9 z"/>\n  </g>\n</svg>\n'},186:(e,n,a)=>{var t=a(62),i=a.n(t),o=a(599);i()(o.Z,{insert:"head",singleton:!1}),o.Z.locals},649:(e,n,a)=>{a.d(n,{S:()=>p});var t=a(526),i=a(840),o=a(991),r=(a(186),a(97));const s={embed:1,proto:"json",configure:1},l=["allow-downloads","allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation"],d="jp-Diagram-ready";class p extends o.IFrame{constructor(e){super(Object.assign({sandbox:l},e)),this._ready=new t.PromiseDelegate,this._initialLoad=!1,this._frameClicked=new i.Signal(this),this._appChanged=new i.Signal(this),this._escaped=new i.Signal(this),this._loaded=new i.Signal(this),this.addClass("jp-Diagram"),this.adapter=e.adapter}exportAs(e){return this._exportPromise=new t.PromiseDelegate,this.postMessage({action:"export",format:e}),this._exportPromise.promise}get app(){return this._app}set app(e){r.eM&&console.warn("drawio app",e),this._app!=e&&(this._app=e,null==e?console.warn("drawio app was not available"):null==e||e.container.addEventListener("mousedown",(()=>{this._frameClicked.emit(void 0)})),this._appChanged.emit(void 0))}get appChanged(){return this._appChanged}get escaped(){return this._escaped}get loaded(){return this._loaded}handleMessageEvent(e){var n,a;let t;try{t=JSON.parse(e.data)}catch(e){return}if(null!=(null===(n=this._frame)||void 0===n?void 0:n.contentWindow)&&e.source===this._frame.contentWindow)switch(r.eM&&console.warn("drawio message received",t),t.event){case"configure":this.configureDrawio();break;case"init":this.onContentChanged();break;case"load":this.app=(null===(a=this._frame)||void 0===a?void 0:a.contentWindow).IPYDRAWIO_APP,this.addClass(d),this._initialLoad||this.onSaveMsg(t),this._initialLoad=!0,this._loaded.emit(void 0),this._ready.resolve(void 0);break;case"save":this.onSaveMsg(t,!0);break;case"autosave":this.onSaveMsg(t);break;case"export":null!=this._exportPromise&&(this._exportPromise.resolve(t.data),this._exportPromise=null),null!=this._saveWithExportPromise&&(this._saveWithExportPromise.resolve(t.data),this._saveWithExportPromise=null);break;default:r.eM&&console.warn("unhandled message",t.event,t)}}onSaveMsg(e,n=!1){this.adapter.saveNeedsExport()?this.saveWithExport(n):(this._lastEmitted=e.xml,this.save(e.xml,n))}onAfterShow(e){var n;null==(null===(n=this._frame)||void 0===n?void 0:n.contentWindow)&&(this._frame=this.node.querySelector("iframe"),window.addEventListener("message",(e=>this.handleMessageEvent(e)))),this.maybeReloadFrame()}save(e,n=!1){this.adapter.fromXML(e,n)}saveWithExport(e=!1){const{format:n}=this;if(null==n)return void console.warn("cannot save without context");const{mimetype:a}=n;null!=(null==n?void 0:n.save)?(this._saveWithExportPromise=new t.PromiseDelegate,this.postMessage({action:"export",format:n.key}),this._saveWithExportPromise.promise.then((a=>{if(null==(null==n?void 0:n.save))return void console.warn("format cannot save",n);const t=n.save(a);t!==this._lastEmitted&&(this._lastEmitted=t,this.save(t,e))})).catch((e=>{console.error(e)}))):console.error(`Unexpected save with export of ${a}`)}configureDrawio(){let e=this.adapter.drawioConfig();const n=Object.assign(Object.assign({},e||{}),{version:""+ +new Date});r.eM&&console.warn("configuring drawio",n),this.postMessage({action:"configure",config:n})}postMessage(e){var n;return null!=(null===(n=this._frame)||void 0===n?void 0:n.contentWindow)&&(this._frame.contentWindow.postMessage(JSON.stringify(e),"*"),!0)}maybeReloadFrame(e=!1){if(this.isHidden||!this.isVisible)return;const n=new URLSearchParams,a=this.adapter.urlParams(),t=Object.assign(Object.assign({},a||{}),s);let i="";for(const e in t)"p"!=e?n.append(e,t[e]):i=t[e];const o=this.adapter.drawioUrl()+"?"+n.toString()+`&p=${i}`;(e||this.url!==o)&&(r.eM&&console.warn("configuring iframe",t),this.removeClass(d),this.url=o,this._initialLoad=!1,this._frame.onload=()=>{var e;null===(e=this._frame.contentDocument)||void 0===e||e.addEventListener("keydown",(e=>{27===e.keyCode&&this._escaped.emit(void 0)})),null!=this._frame.contentDocument||console.warn("contentDocument not ready")})}onContentChanged(){var e,n;if(!(null===(e=this._frame)||void 0===e?void 0:e.contentWindow)||!this.format)return void(r.eM&&console.warn("contentWindow or format not ready",null===(n=this._frame)||void 0===n?void 0:n.contentWindow,this.format));let a=this.adapter.toXML();a!==this._lastEmitted?("base64"===this.format.modelName&&(a=`data:${this.format.mimetype};base64,${a}`),this._initialLoad?this.postMessage({action:"merge",xml:a}):this.postMessage({action:"load",autosave:1,noSaveBtn:1,noExitBtn:1,xml:a})):r.eM&&console.warn("content has not changed")}load(e){this.postMessage({action:"load",xml:e})}get format(){return this.adapter.format()}get frameClicked(){return this._frameClicked}get ready(){return this._ready.promise}}},656:(e,n,a)=>{a.d(n,{EH:()=>d,Fl:()=>m,Fn:()=>g,GS:()=>w,Hx:()=>p,QL:()=>f,R3:()=>u,TI:()=>c,W6:()=>y,WB:()=>b,WY:()=>v,Wy:()=>s,nm:()=>h,sc:()=>l,t6:()=>x});var t=a(912),i=a(689),o=a(97),r=a(988);const s=new t.LabIcon({name:"drawio:plain",svgstr:i.Z.replace(o.zw,"jp-icon3")}),l=Object.entries(o.cr).reduce(((e,[n,a])=>{let r=i.Z.replace(o.zw,"");for(const[e,n]of a)r=r.replace(e,n);return e[n]=new t.LabIcon({name:`drawio:ui:${n}`,svgstr:r}),e}),{}),d=new t.LabIcon({name:"drawio:drawio",svgstr:i.Z}),p=new t.LabIcon({name:"drawio:svg",svgstr:i.Z.replace(o.zw,"jp-icon-contrast1")}),c=new t.LabIcon({name:"drawio:png",svgstr:i.Z.replace(o.zw,"jp-icon-contrast0")}),m={ext:".dio",format:"text",icon:d,key:"drawio",label:"Diagram",mimetype:"application/x-drawio",name:"dio",modelName:"text",factoryName:o.fO,isExport:!0,isEditable:!0,isText:!0,isDefault:!0,isTransformed:!1,exporter:async(e,n,a)=>await e.adapter.toXML()},g={ext:".drawio",format:"text",icon:d,key:"dio",label:"Diagram (mxgraph)",mimetype:"application/x-mxgraph",name:"dio-legacy",modelName:"text",factoryName:`${o.fO} (Legacy)`,isExport:!0,isEditable:!0,isText:!0,isDefault:!0,isTransformed:!1},h={ext:".svg",format:"text",factoryName:`${o.fO} (SVG)`,modelName:"text",icon:p,key:"svg",label:"SVG",mimetype:"image/svg+xml",name:"svg",save:r.I,isDefault:!1,isExport:!0,isText:!0,isTransformed:!0},u=Object.assign(Object.assign({},h),{factoryName:`${o.fO} (Editable SVG)`,ext:".dio.svg",key:"xmlsvg",label:"SVG (Editable)",name:"diosvg",pattern:"^.*\\.dio\\.svg$",isEditable:!0,isDefault:!0,isTransformed:!0}),f={ext:".png",format:"base64",modelName:"base64",factoryName:`${o.mD} (PNG)`,icon:c,key:"png",label:"PNG",mimetype:"image/png",name:"png",save:r.y,isBinary:!0,isExport:!0,isTransformed:!0},w=Object.assign(Object.assign({},f),{factoryName:`${o.mD} (Editable PNG)`,ext:".dio.png",key:"xmlpng",label:"PNG (Editable)",name:"diopng",pattern:"^.*\\.dio\\.png$",isEditable:!0,isDefault:!0}),y=[f,w],b=[u,h,m,g],v=[m],x=[...y,...b]},97:(e,n,a)=>{a.d(n,{mD:()=>h,sr:()=>m,OF:()=>I,eM:()=>y,pj:()=>v,zw:()=>b,zY:()=>f,rY:()=>D,tm:()=>w,Yg:()=>u,GE:()=>P,lq:()=>_,wO:()=>k,qp:()=>E,Fy:()=>L,up:()=>N,gZ:()=>M,Bx:()=>S,NS:()=>d,iR:()=>l,Uu:()=>c,fO:()=>g,oP:()=>x,Ht:()=>j,cr:()=>C,q4:()=>p});var t=a(526);const i=JSON.parse('{"author":"IPyDrawio Contributors","bugs":{"url":"https://github.com/deathbeds/ipydrawio/issues"},"homepage":"https://ipydrawio.rtfd.io","dependencies":{"@jupyterlab/application":"^3.1.0","@jupyterlab/launcher":"^3.1.0","@jupyterlab/mainmenu":"^3.1.0","@deathbeds/ipydrawio-webpack":"^20.2.800"},"description":"A JupyterLab extension for embedding interactive drawio / mxgraph diagrams.","devDependencies":{"@jupyterlab/builder":"^3.4.0","typescript":"~4.2.3","@jupyter-widgets/base":"^4.0.0 || ^6.0.0","@jupyter-widgets/controls":"^3.0.0 || ^5.0.0","@jupyter-widgets/jupyterlab-manager":"^3.0.0 || ^5.0.0","json-schema-to-typescript":"^10.1.4"},"peerDependencies":{"@jupyter-widgets/base":"^4.0.0 || ^6.0.0","@jupyter-widgets/controls":"^3.0.0 || ^5.0.0","@jupyter-widgets/jupyterlab-manager":"^3.0.0 || ^5.0.0"},"files":["{lib,schema,style,src}/**/*.{ts,tsx,eot,gif,html,jpg,js,js.map,json,png,svg,woff2,css}","LICENSE.txt"],"jupyterlab":{"extension":"lib/plugin.js","mimeExtension":"lib/mime.js","schemaDir":"schema","outputDir":"../../py_packages/ipydrawio/src/ipydrawio/ext/ipd","sharedPackages":{"@deathbeds/ipydrawio-webpack":{"bundled":false,"singleton":true},"@jupyter-widgets/base":{"bundled":false,"singleton":true},"@jupyter-widgets/controls":{"bundled":false,"singleton":true}},"discovery":{"server":{"base":{"name":"ipydrawio"},"managers":["pip","conda"]}}},"keywords":["jupyter","jupyterlab","jupyterlab-extension"],"license":"Apache-2.0","main":"lib/index.js","name":"@deathbeds/ipydrawio","repository":{"type":"git","url":"https://github.com/deathbeds/ipydrawio.git"},"scripts":{"build:pre":"python scripts/schema.py"},"types":"lib/index.d.ts","version":"1.2.1"}');var o=a.t(i,2),r=a(689);const s=JSON.parse('{"Cb":{"tH":{"Km":["min","atlas","dark","kennedy","sketch"]}}}'),l=o,d=l.name,p=l.version,c=`${d}:plugin`,m="ipydrawio",g="Diagram",h="Diagram Image",u="Diagram Notebook",f=r.Z,w=d,y=window.location.href.indexOf("DRAWIO_DEBUG")>-1,b=/jp-icon-warn0/,v=99,x=s.Cb.tH.Km,j="#f08705",C={sketch:[[j,"#fff2a1"]],dark:[[j,"#666"]],min:[[j,"#eee"]],kennedy:[[j,"#0052cc"]],atlas:[[j,"#0049B0"]]},D=new t.Token(c);var I;!function(e){e.createNew="drawio:create-new",e.createNewCustom="drawio:create-new-custom",e.setUrlParams="drawio:url-params"}(I||(I={}));const P=["backgroundColorChanged","backgroundImageChanged","connectionArrowsChanged","connectionPointsChanged","copyConnectChanged","customFontsChanged","foldingEnabledChanged","formatWidthChanged","gridColorChanged","gridEnabledChanged","guidesEnabledChanged","mathEnabledChanged","pageFormatChanged","pageScaleChanged","pageViewChanged","pageViewChanged","shadowVisibleChanged","styleChanged"],_=["autosaveChanged","fileLoaded","fileLoaded","pageSelected","resetGraphView","statusChanged"],k=["cellsAdded","cellsInserted","editingStarted","editingStopped","escape","fireMouseEvent","gesture","gridSizeChanged","moveCells","pan","resizeCells","removeCells","root","shadowVisibleChanged","size","startEditing","tapAndHold","textInserted","viewStateChanged"],E=["change"],S=["down","scale","scaleAndTranslate","translate","undo","unitChanged","up"],L=["panStart","panEnd","pan"],N=["change"],M=["change"]},988:(e,n,a)=>{function t(e){return e.split(",")[1]}function i(e){return atob(t(e))}a.d(n,{I:()=>i,y:()=>t})}}]);